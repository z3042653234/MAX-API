
# MAX API

> [!NOTE]
> æœ¬é¡¹ç›®ä¸ºå¼€æºé¡¹ç›®ï¼Œåœ¨[New API](https://github.com/Calcium-Ion/new-api/)çš„åŸºç¡€ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œæ„Ÿè°¢åŸä½œè€…çš„æ— ç§å¥‰çŒ®ã€‚ 
> ä½¿ç”¨è€…å¿…é¡»åœ¨éµå¾ª OpenAI çš„[ä½¿ç”¨æ¡æ¬¾](https://openai.com/policies/terms-of-use)ä»¥åŠ**æ³•å¾‹æ³•è§„**çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¸å¾—ç”¨äºéæ³•ç”¨é€”ã€‚


> [!WARNING]
> æœ¬é¡¹ç›®ä¸ºä¸ªäººå­¦ä¹ ä½¿ç”¨ï¼Œä¸ä¿è¯ç¨³å®šæ€§ï¼Œä¸”ä¸æä¾›ä»»ä½•æŠ€æœ¯æ”¯æŒï¼Œä½¿ç”¨è€…å¿…é¡»åœ¨éµå¾ª OpenAI çš„ä½¿ç”¨æ¡æ¬¾ä»¥åŠæ³•å¾‹æ³•è§„çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¸å¾—ç”¨äºéæ³•ç”¨é€”ã€‚  
> æ ¹æ®[ã€Šç”Ÿæˆå¼äººå·¥æ™ºèƒ½æœåŠ¡ç®¡ç†æš‚è¡ŒåŠæ³•ã€‹](http://www.cac.gov.cn/2023-07/13/c_1690898327029107.htm)çš„è¦æ±‚ï¼Œè¯·å‹¿å¯¹ä¸­å›½åœ°åŒºå…¬ä¼—æä¾›ä¸€åˆ‡æœªç»å¤‡æ¡ˆçš„ç”Ÿæˆå¼äººå·¥æ™ºèƒ½æœåŠ¡ã€‚


## äºŒå¼€å†…å®¹

> æœ¬ç‰ˆæœ¬æ˜¯ç”±new-apiçš„æœ€æ–°ç‰ˆæœ¬è¿›è¡Œçš„äºŒå¼€ï¼
### å…·ä½“ç¾åŒ–é¡µé¢çœ‹ä¸‹æ–¹è¡™é—¨æ˜¯æˆªå›¾ï¼š

1. ä¾§è¾¹æ ç¾åŒ–
![image|690x397](https://cdn.linux.do/uploads/default/optimized/3X/e/5/e58a3bc55e684a8e3757d291cb9a154510cfb7cb_2_1035x595.jpeg)

2. é¡¶æ ç¾åŒ–
![image|690x397](https://cdn.linux.do/uploads/default/optimized/3X/0/4/0420879e84faaaf8c101142e8ff40760da6afd42_2_1035x595.jpeg)

3. æ—¥å¿—éƒ¨åˆ†ä¼˜åŒ–ï¼Œå¢åŠ ä¸‹æ‹‰å¼èœå•æ 
![image|690x393](https://cdn.linux.do/uploads/default/optimized/3X/8/9/89d179f7d642df78351668b8537a2c6867f0c490_2_1035x589.jpeg)

4. ç™»å½•æ³¨å†Œç•Œé¢ç¾åŒ–ï¼ˆæ³¨å†Œé¡µé¢åŒç†ï¼‰
![image|690x495](https://cdn.linux.do/uploads/default/optimized/3X/b/3/b3155e2cbd8f2d92b2eb21d58e100128daecd6d6_2_1035x742.png)

5. å°†å…³äºé¡µé¢æ”¹ä¸ºæ´»åŠ¨ç¦åˆ©é¡µé¢
![image|690x495](https://cdn.linux.do/uploads/default/optimized/3X/a/a/aa1f64d43b04cd6d529feeed2be24d44c80000a0_2_1035x742.jpeg)
![image|690x495](https://cdn.linux.do/uploads/default/optimized/3X/9/6/96fc880685b11a21857d61a7c3d387193b2c9f01_2_1035x742.jpeg)

6. ä¸ªäººè®¾ç½®ï¼ˆç¨å¾®ä¼˜åŒ–äº†ä¸€ä¸‹uiï¼‰
![image|690x495](https://cdn.linux.do/uploads/default/optimized/3X/c/a/ca082ebd279e5facc6c6d0bb8a49dfeb197fa882_2_1035x742.jpeg)

7. å„ç§æ—¥å¿—é¡µé¢å¢åŠ å¤§æ ‡é¢˜ï¼ˆè¿™é‡Œåªæ”¾ä¸€å¼ å›¾ï¼Œå…¶ä»–åŒç†ï¼‰
![image|690x495](https://cdn.linux.do/uploads/default/optimized/3X/7/f/7f2e1383a25be9afdfa806babed4de120f06459f_2_1035x742.jpeg)

8. å¢åŠ sunoæ­Œè¯ç”Ÿæˆå™¨
![image|690x397](https://cdn.linux.do/uploads/default/optimized/3X/8/c/8cb84f0049a1382115b422e86c4e2d8842c16801_2_1035x595.jpeg)

9. å…¬å‘Šç¾åŒ–
![image|690x498](https://cdn.linux.do/uploads/default/optimized/3X/2/2/223e51654448712b71372deda2dea1d0e76441b4_2_1035x747.jpeg)

10. æˆ‘çš„ä»¤ç‰Œé¡µç¾åŒ–
![image|690x498](https://cdn.linux.do/uploads/default/optimized/3X/d/2/d2323ed2dba52edc8d71d01562ec395c956f98e4_2_1035x747.jpeg)

11. é’±åŒ…é¡µé¢ç¾åŒ–ï¼ˆå›¾ç‰‡é‡‡ç”¨éšæœºäºŒæ¬¡å…ƒå›¾ç‰‡ï¼Œä¿éšœæ–°é²œæ„ŸğŸ¤­ï¼‰
![image|690x498](https://cdn.linux.do/uploads/default/optimized/3X/e/9/e9a32e1e142afdfdd2445d9378e119ff7c40f283_2_1035x747.jpeg)


## ä¸»è¦åŠŸèƒ½

1. å…¨æ–°çš„UIç•Œé¢ï¼ˆéƒ¨åˆ†ç•Œé¢è¿˜å¾…æ›´æ–°ï¼‰
2. æ·»åŠ [Midjourney-Proxy(Plus)](https://github.com/novicezk/midjourney-proxy)æ¥å£çš„æ”¯æŒï¼Œ[å¯¹æ¥æ–‡æ¡£](Midjourney.md)ï¼Œæ”¯æŒçš„æ¥å£å¦‚ä¸‹ï¼š
   + [x] /mj/submit/imagine
   + [x] /mj/submit/change
   + [x] /mj/submit/blend
   + [x] /mj/submit/describe
   + [x] /mj/image/{id} ï¼ˆé€šè¿‡æ­¤æ¥å£è·å–å›¾ç‰‡ï¼Œ**è¯·å¿…é¡»åœ¨ç³»ç»Ÿè®¾ç½®ä¸­å¡«å†™æœåŠ¡å™¨åœ°å€ï¼ï¼**ï¼‰
   + [x] /mj/task/{id}/fetch ï¼ˆæ­¤æ¥å£è¿”å›çš„å›¾ç‰‡åœ°å€ä¸ºç»è¿‡One APIè½¬å‘çš„åœ°å€ï¼‰
   + [x] /task/list-by-condition
   + [x] /mj/submit/action ï¼ˆä»…midjourney-proxy-plusæ”¯æŒï¼Œä¸‹åŒï¼‰
   + [x] /mj/submit/modal
   + [x] /mj/submit/shorten
   + [x] /mj/task/{id}/image-seed
   + [x] /mj/insight-face/swap ï¼ˆInsightFaceï¼‰
3. æ”¯æŒåœ¨çº¿å……å€¼åŠŸèƒ½ï¼Œå¯åœ¨ç³»ç»Ÿè®¾ç½®ä¸­è®¾ç½®ï¼Œå½“å‰æ”¯æŒçš„æ”¯ä»˜æ¥å£ï¼š
   + [x] æ˜“æ”¯ä»˜
4. æ”¯æŒç”¨keyæŸ¥è¯¢ä½¿ç”¨é¢åº¦:
   + é…åˆé¡¹ç›®[neko-api-key-tool](https://github.com/Calcium-Ion/neko-api-key-tool)å¯å®ç°ç”¨keyæŸ¥è¯¢ä½¿ç”¨
5. æ¸ é“æ˜¾ç¤ºå·²ä½¿ç”¨é¢åº¦ï¼Œæ”¯æŒæŒ‡å®šç»„ç»‡è®¿é—®
6. åˆ†é¡µæ”¯æŒé€‰æ‹©æ¯é¡µæ˜¾ç¤ºæ•°é‡
7. å…¼å®¹åŸç‰ˆOne APIçš„æ•°æ®åº“ï¼Œå¯ç›´æ¥ä½¿ç”¨åŸç‰ˆæ•°æ®åº“ï¼ˆone-api.dbï¼‰
8. æ”¯æŒæ¨¡å‹æŒ‰æ¬¡æ•°æ”¶è´¹ï¼Œå¯åœ¨ ç³»ç»Ÿè®¾ç½®-è¿è¥è®¾ç½® ä¸­è®¾ç½®
9. æ”¯æŒæ¸ é“**åŠ æƒéšæœº**
10. æ•°æ®çœ‹æ¿
11. å¯è®¾ç½®ä»¤ç‰Œèƒ½è°ƒç”¨çš„æ¨¡å‹
12. æ”¯æŒTelegramæˆæƒç™»å½•ã€‚
    1. ç³»ç»Ÿè®¾ç½®-é…ç½®ç™»å½•æ³¨å†Œ-å…è®¸é€šè¿‡Telegramç™»å½•
    2. å¯¹[@Botfather](https://t.me/botfather)è¾“å…¥æŒ‡ä»¤/setdomain
    3. é€‰æ‹©ä½ çš„botï¼Œç„¶åè¾“å…¥http(s)://ä½ çš„ç½‘ç«™åœ°å€/login
    4. Telegram Bot åç§°æ˜¯bot username å»æ‰@åçš„å­—ç¬¦ä¸²
13. æ·»åŠ  [Suno API](https://github.com/Suno-API/Suno-API)æ¥å£çš„æ”¯æŒï¼Œ[å¯¹æ¥æ–‡æ¡£](Suno.md)ï¼Œæ”¯æŒçš„æ¥å£å¦‚ä¸‹ï¼š
    + [x] /suno/submit/music
    + [x] /suno/submit/lyrics
    + [x] /suno/fetch
    + [x] /suno/fetch/:id

## æ¨¡å‹æ”¯æŒ
æ­¤ç‰ˆæœ¬é¢å¤–æ”¯æŒä»¥ä¸‹æ¨¡å‹ï¼š
1. ç¬¬ä¸‰æ–¹æ¨¡å‹ **gps** ï¼ˆgpt-4-gizmo-*ï¼‰
2. æ™ºè°±glm-4vï¼Œglm-4vè¯†å›¾
3. Anthropic Claude 3 (claude-3-opus-20240229, claude-3-sonnet-20240229)
4. [Ollama](https://github.com/ollama/ollama?tab=readme-ov-file)ï¼Œæ·»åŠ æ¸ é“æ—¶ï¼Œå¯†é’¥å¯ä»¥éšä¾¿å¡«å†™ï¼Œé»˜è®¤çš„è¯·æ±‚åœ°å€æ˜¯[http://localhost:11434](http://localhost:11434)ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¯·åœ¨æ¸ é“ä¸­ä¿®æ”¹
5. [Midjourney-Proxy(Plus)](https://github.com/novicezk/midjourney-proxy)æ¥å£ï¼Œ[å¯¹æ¥æ–‡æ¡£](Midjourney.md)
6. [é›¶ä¸€ä¸‡ç‰©](https://platform.lingyiwanwu.com/)
7. è‡ªå®šä¹‰æ¸ é“ï¼Œæ”¯æŒå¡«å…¥å®Œæ•´è°ƒç”¨åœ°å€
8. [Suno API](https://github.com/Suno-API/Suno-API) æ¥å£ï¼Œ[å¯¹æ¥æ–‡æ¡£](Suno.md)

æ‚¨å¯ä»¥åœ¨æ¸ é“ä¸­æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹gpt-4-gizmo-*ï¼Œæ­¤æ¨¡å‹å¹¶éOpenAIå®˜æ–¹æ¨¡å‹ï¼Œè€Œæ˜¯ç¬¬ä¸‰æ–¹æ¨¡å‹ï¼Œä½¿ç”¨å®˜æ–¹keyæ— æ³•è°ƒç”¨ã€‚

## æ¸ é“é‡è¯•
æ¸ é“é‡è¯•åŠŸèƒ½å·²ç»å®ç°ï¼Œå¯ä»¥åœ¨`è®¾ç½®->è¿è¥è®¾ç½®->é€šç”¨è®¾ç½®`è®¾ç½®é‡è¯•æ¬¡æ•°ï¼Œ**å»ºè®®å¼€å¯ç¼“å­˜**åŠŸèƒ½ã€‚  
å¦‚æœå¼€å¯äº†é‡è¯•åŠŸèƒ½ï¼Œç¬¬ä¸€æ¬¡é‡è¯•ä½¿ç”¨åŒä¼˜å…ˆçº§ï¼Œç¬¬äºŒæ¬¡é‡è¯•ä½¿ç”¨ä¸‹ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä»¥æ­¤ç±»æ¨ã€‚  
### ç¼“å­˜è®¾ç½®æ–¹æ³•
1. `REDIS_CONN_STRING`ï¼šè®¾ç½®ä¹‹åå°†ä½¿ç”¨ Redis ä½œä¸ºç¼“å­˜ä½¿ç”¨ã€‚
    + ä¾‹å­ï¼š`REDIS_CONN_STRING=redis://default:redispw@localhost:49153`
2. `MEMORY_CACHE_ENABLED`ï¼šå¯ç”¨å†…å­˜ç¼“å­˜ï¼ˆå¦‚æœè®¾ç½®äº†`REDIS_CONN_STRING`ï¼Œåˆ™æ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼‰ï¼Œä¼šå¯¼è‡´ç”¨æˆ·é¢åº¦çš„æ›´æ–°å­˜åœ¨ä¸€å®šçš„å»¶è¿Ÿï¼Œå¯é€‰å€¼ä¸º `true` å’Œ `false`ï¼Œæœªè®¾ç½®åˆ™é»˜è®¤ä¸º `false`ã€‚
    + ä¾‹å­ï¼š`MEMORY_CACHE_ENABLED=true`
### ä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™æ²¡æœ‰é‡è¯•
è¿™äº›é”™è¯¯ç ä¸ä¼šé‡è¯•ï¼š400ï¼Œ504ï¼Œ524
### æˆ‘æƒ³è®©400ä¹Ÿé‡è¯•
åœ¨`æ¸ é“->ç¼–è¾‘`ä¸­ï¼Œå°†`çŠ¶æ€ç å¤å†™`æ”¹ä¸º
```json
{
  "400": "500"
}
```
å¯ä»¥å®ç°400é”™è¯¯è½¬ä¸º500é”™è¯¯ï¼Œä»è€Œé‡è¯•


## éƒ¨ç½²
### åŸºäº Docker è¿›è¡Œéƒ¨ç½²
```shell
# ä½¿ç”¨ SQLite çš„éƒ¨ç½²å‘½ä»¤ï¼š
docker run --name max-api -d --restart always -p 3000:3000 -e TZ=Asia/Shanghai -v /home/ubuntu/data/max-api:/data registry.cn-hangzhou.aliyuncs.com/pochacco/max-api:v1.1
# ä½¿ç”¨ MySQL çš„éƒ¨ç½²å‘½ä»¤ï¼Œåœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ·»åŠ  `-e SQL_DSN="root:123456@tcp(localhost:3306)/oneapi"`ï¼Œè¯·è‡ªè¡Œä¿®æ”¹æ•°æ®åº“è¿æ¥å‚æ•°ã€‚
# ä¾‹å¦‚ï¼š
docker run --name max-api -d --restart always -p 3000:3000 -e SQL_DSN="root:123456@tcp(localhost:3306)/oneapi" -e TZ=Asia/Shanghai -v /home/ubuntu/data/max-api:/data registry.cn-hangzhou.aliyuncs.com/pochacco/max-api:v1.1
```
### ä½¿ç”¨å®å¡”é¢æ¿DockeråŠŸèƒ½éƒ¨ç½²
```shell
# ä½¿ç”¨ SQLite çš„éƒ¨ç½²å‘½ä»¤ï¼š
docker run --name max-api -d --restart always -p 3000:3000 -e TZ=Asia/Shanghai -v /home/ubuntu/data/max-api:/data registry.cn-hangzhou.aliyuncs.com/pochacco/max-api:v1.1
# ä½¿ç”¨ MySQL çš„éƒ¨ç½²å‘½ä»¤ï¼Œåœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šæ·»åŠ  `-e SQL_DSN="root:123456@tcp(localhost:3306)/oneapi"`ï¼Œè¯·è‡ªè¡Œä¿®æ”¹æ•°æ®åº“è¿æ¥å‚æ•°ã€‚
# ä¾‹å¦‚ï¼š
# æ³¨æ„ï¼šæ•°æ®åº“è¦å¼€å¯è¿œç¨‹è®¿é—®ï¼Œå¹¶ä¸”åªå…è®¸æœåŠ¡å™¨IPè®¿é—®
docker run --name max-api -d --restart always -p 3000:3000 -e SQL_DSN="root:123456@tcp(å®å¡”çš„æœåŠ¡å™¨åœ°å€:å®å¡”æ•°æ®åº“ç«¯å£)/å®å¡”æ•°æ®åº“åç§°" -e TZ=Asia/Shanghai -v /www/wwwroot/max-api:/data registry.cn-hangzhou.aliyuncs.com/pochacco/max-api:v1.1
# æ³¨æ„ï¼šæ•°æ®åº“è¦å¼€å¯è¿œç¨‹è®¿é—®ï¼Œå¹¶ä¸”åªå…è®¸æœåŠ¡å™¨IPè®¿é—®
```
### é»˜è®¤è´¦å·å¯†ç 
é»˜è®¤è´¦å·root å¯†ç 123456

## Midjourneyæ¥å£è®¾ç½®æ–‡æ¡£
[å¯¹æ¥æ–‡æ¡£](Midjourney.md)

## Sunoæ¥å£è®¾ç½®æ–‡æ¡£
[å¯¹æ¥æ–‡æ¡£](Suno.md)

## äº¤æµç¾¤
<img src="https://github.com/Calcium-Ion/new-api/assets/61247483/de536a8a-0161-47a7-a0a2-66ef6de81266" width="300">

## ç•Œé¢æˆªå›¾
![image](https://github.com/Calcium-Ion/new-api/assets/61247483/ad0e7aae-0203-471c-9716-2d83768927d4)

![image](https://github.com/Calcium-Ion/new-api/assets/61247483/d1ac216e-0804-4105-9fdc-66b35022d861)

![image](https://github.com/Calcium-Ion/new-api/assets/61247483/3ca0b282-00ff-4c96-bf9d-e29ef615c605)  
![image](https://github.com/Calcium-Ion/new-api/assets/61247483/f4f40ed4-8ccb-43d7-a580-90677827646d)  
![image](https://github.com/Calcium-Ion/new-api/assets/61247483/90d7d763-6a77-4b36-9f76-2bb30f18583d)
![image](https://github.com/Calcium-Ion/new-api/assets/61247483/e414228a-3c35-429a-b298-6451d76d9032)
å¤œé—´æ¨¡å¼  
![image](https://github.com/Calcium-Ion/new-api/assets/61247483/1c66b593-bb9e-4757-9720-ff2759539242)

![image](https://github.com/Calcium-Ion/new-api/assets/61247483/5b3228e8-2556-44f7-97d6-4f8d8ee6effa)  
![image](https://github.com/Calcium-Ion/new-api/assets/61247483/af9a07ee-5101-4b3d-8bd9-ae21a4fd7e9e)

## ç›¸å…³é¡¹ç›®
- [New API](https://github.com/Calcium-Ion/new-api)ï¼šåŸç‰ˆé¡¹ç›®
- [Midjourney-Proxy](https://github.com/novicezk/midjourney-proxy)ï¼šMidjourneyæ¥å£æ”¯æŒ
- [chatnio](https://github.com/Deeptrain-Community/chatnio)ï¼šä¸‹ä¸€ä»£ AI ä¸€ç«™å¼ B/C ç«¯è§£å†³æ–¹æ¡ˆ
- [neko-api-key-tool](https://github.com/Calcium-Ion/neko-api-key-tool)ï¼šç”¨keyæŸ¥è¯¢ä½¿ç”¨é¢åº¦

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=Calcium-Ion/new-api&type=Date)](https://star-history.com/#Calcium-Ion/new-api&Date)
